<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>Sign Up - Xclusive Money</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #ffffff; color: #0f172a;">
    <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 16px; background-color: #ffffff;">
        <div style="width: 100%; max-width: 448px;">
            <div style="text-align: center; margin-bottom: 24px;">
                <h1 style="font-size: 36px; font-weight: 700; color: #0f172a; margin: 0 0 8px 0; line-height: 1.2;">
                    Get started absolutely free
                </h1>
                <p style="color: #64748b; margin: 0; font-size: 14px;">
                    Already have an account?
                    <a href="{{ url_for('auth.login') }}" style="color: #3b82f6; font-weight: 500; text-decoration: none;">
                        Sign in
                    </a>
                </p>
            </div>
            {% if error %}
            <div style="margin-bottom: 16px; padding: 12px 16px; border-radius: 6px; background-color: #fee2e2; color: #b91c1c; font-size: 14px;">
                {{ error }}
            </div>
            {% endif %}
            <form id="signupForm" method="post" action="{{ url_for('auth.signup') }}" onsubmit="return handleSubmit(event)" style="display: flex; flex-direction: column; gap: 16px;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="full_phone" id="fullPhone" value="{{ request.form.get('full_phone', '') }}">
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="email" style="font-size: 14px; font-weight: 500; color: #64748b;">
                        email
                    </label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="your@email.com"
                        value="{{ request.form.get('email', '') }}"
                        required
                        style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background-color: #ffffff; color: #0f172a; outline: none; transition: border-color 0.2s; box-sizing: border-box;"
                        onfocus="this.style.borderColor='#3b82f6'"
                        onblur="this.style.borderColor='#e2e8f0'"
                    />
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="phone" style="font-size: 14px; font-weight: 500; color: #64748b;">
                        mobile
                    </label>
                    <div style="display: flex; gap: 8px;">
                        <select id="countryCode" name="country_code" style="width: 100px; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background-color: #ffffff; color: #0f172a; cursor: pointer; outline: none;">
                            <option value="+91" {% if request.form.get('country_code', '+91') == '+91' %}selected{% endif %}>+91</option>
                            <option value="+1" {% if request.form.get('country_code') == '+1' %}selected{% endif %}>+1</option>
                            <option value="+44" {% if request.form.get('country_code') == '+44' %}selected{% endif %}>+44</option>
                            <option value="+86" {% if request.form.get('country_code') == '+86' %}selected{% endif %}>+86</option>
                            <option value="+81" {% if request.form.get('country_code') == '+81' %}selected{% endif %}>+81</option>
                            <option value="+61" {% if request.form.get('country_code') == '+61' %}selected{% endif %}>+61</option>
                            <option value="+971" {% if request.form.get('country_code') == '+971' %}selected{% endif %}>+971</option>
                        </select>
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            placeholder="XXXXXXXXXX"
                            value="{{ request.form.get('phone', '') }}"
                            maxlength="10"
                            required
                            style="flex: 1; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background-color: #ffffff; color: #0f172a; outline: none; transition: border-color 0.2s;"
                            onfocus="this.style.borderColor='#3b82f6'"
                            onblur="this.style.borderColor='#e2e8f0'"
                            oninput="this.value = this.value.replace(/\D/g, '')"
                        />
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="password" style="font-size: 14px; font-weight: 500; color: #64748b;">
                        Password
                    </label>
                    <div style="position: relative;">
                        <input
                            type="password"
                            id="password"
                            name="password"
                            placeholder="Create a strong password"
                            required
                            minlength="8"
                            style="width: 100%; padding: 10px 40px 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background-color: #ffffff; color: #0f172a; outline: none; transition: border-color 0.2s; box-sizing: border-box;"
                            onfocus="this.style.borderColor='#3b82f6'"
                            onblur="this.style.borderColor='#e2e8f0'"
                        />
                        <button
                            type="button"
                            onclick="togglePassword('password', 'eyeIcon1')"
                            style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0; display: flex; align-items: center; color: #64748b;"
                        >
                            <svg id="eyeIcon1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                    <p style="font-size: 12px; color: #64748b; margin: 4px 0 0 0;">
                        Must be at least 8 characters
                    </p>
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="confirmPassword" style="font-size: 14px; font-weight: 500; color: #64748b;">
                        Confirm Password
                    </label>
                    <div style="position: relative;">
                        <input
                            type="password"
                            id="confirmPassword"
                            name="confirm_password"
                            placeholder="Re-enter your password"
                            required
                            minlength="8"
                            style="width: 100%; padding: 10px 40px 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background-color: #ffffff; color: #0f172a; outline: none; transition: border-color 0.2s; box-sizing: border-box;"
                            onfocus="this.style.borderColor='#3b82f6'"
                            onblur="this.style.borderColor='#e2e8f0'"
                        />
                        <button
                            type="button"
                            onclick="togglePassword('confirmPassword', 'eyeIcon2')"
                            style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0; display: flex; align-items: center; color: #64748b;"
                        >
                            <svg id="eyeIcon2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                </div>
                <button
                    type="submit"
                    style="width: 100%; padding: 14px 16px; background-color: #3b82f6; color: #ffffff; border: none; border-radius: 6px; font-size: 16px; font-weight: 500; cursor: pointer; transition: background-color 0.2s; margin-top: 8px;"
                    onmouseover="this.style.backgroundColor='#2563eb'"
                    onmouseout="this.style.backgroundColor='#3b82f6'"
                >
                    Create account
                </button>
                <p style="text-align: center; font-size: 12px; color: #64748b; margin: 8px 0 0 0;">
                    By creating an account, you agree to our
                    <a href="terms.html" style="color: #3b82f6; text-decoration: none;">Terms of Service</a>
                    and
                    <a href="privacy.html" style="color: #3b82f6; text-decoration: none;">Privacy Policy</a>
                </p>
            </form>
        </div>
    </div>
    <div id="toast" style="position: fixed; top: 20px; right: 20px; padding: 16px 24px; background-color: #10b981; color: #ffffff; border-radius: 6px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); display: none; z-index: 1000; font-size: 14px; font-weight: 500;">
        Account created successfully!
    </div>
    <script>
        function togglePassword(fieldId, iconId) {
            const passwordInput = document.getElementById(fieldId);
            const eyeIcon = document.getElementById(iconId);
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
            }
        }
        function handleSubmit(event) {
            const form = event.target;
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const countryCode = document.getElementById('countryCode').value;
            if (!email || !email.includes('@')) {
                showToast('Please enter a valid email address', 'error');
                return false;
            }
            if (!phone || phone.length < 10) {
                showToast('Please enter a valid phone number', 'error');
                return false;
            }
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return false;
            }
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return false;
            }
            if (!isPasswordStrong(password)) {
                showToast('Password must contain uppercase, lowercase, number, and special character', 'error');
                return false;
            }
            document.getElementById('fullPhone').value = countryCode + phone;
            return true;
        }
        function isPasswordStrong(password) {
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            return hasUpperCase && hasLowerCase && hasNumber && hasSpecialChar;
        }
        function showToast(message, type) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.backgroundColor = type === 'error' ? '#ef4444' : '#10b981';
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            if (confirmPassword && password !== confirmPassword) {
                this.style.borderColor = '#ef4444';
            } else if (confirmPassword && password === confirmPassword) {
                this.style.borderColor = '#10b981';
            } else {
                this.style.borderColor = '#e2e8f0';
            }
        });
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    if (this.id !== 'confirmPassword') {
                        this.style.borderColor = '#3b82f6';
                    }
                    this.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';
                });
                input.addEventListener('blur', function() {
                    if (this.id === 'confirmPassword') {
                        const password = document.getElementById('password').value;
                        const confirmPassword = this.value;
                        if (confirmPassword && password !== confirmPassword) {
                            this.style.borderColor = '#ef4444';
                        } else if (confirmPassword && password === confirmPassword) {
                            this.style.borderColor = '#10b981';
                        } else {
                            this.style.borderColor = '#e2e8f0';
                        }
                    } else {
                        this.style.borderColor = '#e2e8f0';
                    }
                    this.style.boxShadow = 'none';
                });
            });
            const serverError = {{ (error or None)|tojson }};
            if (serverError) {
                showToast(serverError, 'error');
            }
        });
    </script>
</body>
</html>
